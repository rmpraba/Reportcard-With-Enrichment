<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="..\..\bower_components/polymer/polymer.html">
<link rel="import" href="../demosumbit-card/demosumbit-card.html">

<dom-module id="student-add-card">
  <template>
    <style>
      :host {
        display: block;
      }
      .horizontalframe
      {
         @apply(--layout-horizontal);
         display: flex;
         margin-left: 12%;
         width: 80%;
      }
      paper-input, gold-email-input
      {
        width: 80%;
      /*  --paper-input-container-label: { color: red };*/
          text-align:center;
      }
       paper-dropdown-menu
       { 
        width: 85%;
        /*--paper-input-container-label: { color: red };*/
       }
       .horizontalframe .fields paper-input
       {
         width: 90%;
       }

      #newstud
    {
        margin-top: 5%;
        margin-left: 20%;
         width:57%;
        min-height: 900px; 
        border: solid 0px #555; 
        background-color: white; 
        
    }
    .lbl
    {
          @apply(--layout-horizontal);
          margin-top: 12%;
    }
    .tlab
    {
      @apply(--layout-horizontal);
          margin-top: 12%;
    }

    </style>
    <paper-card id="newstud">
      <div>
        <h3><center>Student Details</center></h3>
      </div>

      <div class="fullhorizontal" style="width: 120%;">
      <div class="horizontalframe">
        <div class="fields">
          <paper-dropdown-menu id="admnyr" label="Select  Acadamic year">
              <paper-menu id="adminyearstud" class="dropdown-content"   on-iron-select="Fnadminyr" attr-for-selected="value" required>
                <paper-item value="2016-2017">AY-2016-2017</paper-item>
                <paper-item value="2017-2018">AY-2017-2018</paper-item>
                <paper-item value="2018-2019">AY-2018-2019</paper-item>
                <paper-item value="2019-2020">AY-2019-2020</paper-item>
              </paper-menu>
            </paper-dropdown-menu>
        </div>
        <div class="fields" style="margin-left: 5%">
          <paper-input label="Enrollment Number" value="{{enroll}}"></paper-input>
        </div>
      </div>

      <div class="horizontalframe">
        <div class="fields">
          <paper-input label="First Name" value="{{fname}}"></paper-input>
        </div>
        <div class="fields">
          <paper-input label="Middle Name" value="{{midname}}"></paper-input>
        </div>
        <div class="fields">
          <paper-input label="Last Name" value="{{lsname}}"></paper-input>
        </div>
      </div>

      <div class="horizontalframe">
        <div class="fields">
          <div class="lbl">
            <label>Gender</label>
          </div>
          <div class="gender" style="margin-top: 7%;">
            <span><paper-checkbox id="male"  class="checkbox" on-change="fnmale">Boy</paper-checkbox></span>
            <span><paper-checkbox  id="female" class="checkbox" on-change="fnfemale">Girl</paper-checkbox></span>
          </div>
        </div>
        <div class="fields" style="margin-left: 20%">
          <student-dob-date-picker showdate="{{showdate}}"></student-dob-date-picker>
        </div>
      </div>
      <div class="horizontalframe">
        <div class="fields">
          <!-- <paper-input label="Age" value="{{age}}"></paper-input> -->
           <paper-input readonly label="Age(In Years)" value="{{ageofyr}}"></paper-input>
        </div>
        <div class="fields" style="margin-left: 8%">
          <paper-dropdown-menu id="grade" label="Select Grade">
            <paper-menu id="studgradesss" class="dropdown-content" on-iron-select="FnStosGrade">     
              <template is="dom-repeat" items="{{studentgradearrr}}">
                <paper-item value="{{item.grade_id}}">{{item.grade_name}}</paper-item>
              </template>
            </paper-menu>
          </paper-dropdown-menu>
        </div>
      </div>
     </div> 

        <div>
          <h3><center>Parent/Guardian Details</center></h3>
        </div>

      <div class="fullhorizontal" style="width: 120%;">  
      <div class="horizontalframe">
        <div class="fields">
          <paper-input label="Father's Name" id="dadname" required error-message="needs father's name!" allowed-pattern="[a-zA-Z ]" value="{{fathername}}"></paper-input>
        </div>
        <div class="fields" style="margin-left: 9%">
          <paper-input label="Mother's Name" id="momname" required error-message="needs father's name!" allowed-pattern="[a-zA-Z ]" value="{{mothername}}"></paper-input>
        </div>
      </div>

      <div class="horizontalframe">
        <div class="fields">
          <paper-input id="fmobile" error-message="enter proper mobile no!" label="Father Mobile Number" allowed-pattern="[0-9]" maxlength="10" value="{{fathermob}}"></paper-input>
        </div>
        <div class="fields" style="margin-left: 9%">
          <paper-input id="mtmobile" error-message="enter proper mobile no!" label="Mother Mobile Number" allowed-pattern="[0-9]" maxlength="10" value="{{mothermob}}"></paper-input>
        </div>
      </div>

      <div class="horizontalframe">
        <div class="fields">
          <gold-email-input id="email" error-message="needs email ID!" label="Father Email" value="{{fatheremail}}"></gold-email-input>
        </div>
        <div class="fields" style="margin-left: 9%">
          <gold-email-input id="email" error-message="needs email ID!" label="Mother Email" value="{{motheremail}}"></gold-email-input>
        </div>
      </div>

      <div class="horizontalframe">
        <div class="fields">
          <paper-input id="addr1" label="Address1" value="{{address1}}"></paper-input>
        </div>
        <div class="fields">
          <paper-input id="addr2"  label="Address2" value="{{address2}}"></paper-input>
        </div>
        <div class="fields">
          <paper-input id="addr3" label="Address3" value="{{address3}}"></paper-input>
        </div>
      </div>

      <div class="horizontalframe">
        <div class="fields">
          <paper-input id="fcity" label="City" value="{{city}}"></paper-input>
        </div>
        <div class="fields" style="margin-left: 8%;">
          <paper-input id="fpin" label="Pincode" allowed-pattern="[0-9]" value="{{pincode}}"></paper-input>
        </div>
      </div>

      <div class="horizontalframe">
        <div class="fields">
          <div class="tlab">
            <label>Transport Availability</label>            
          </div>
        
          <div class="transport" style="margin-top: 7%;">
            <span><paper-checkbox id="tyes" checked on-change="transyes">Yes</paper-checkbox></span>
            <span><paper-checkbox  id="tno" on-change="transno">No</paper-checkbox></span>
          </div>
        </div>
      </div>
<!-- 
      <div class="horizontalframe">
        <div class="fields">
          <paper-input label="Guardian's Name" id="guardname" required error-message="needs guardian's name!" allowed-pattern="[a-zA-Z ]" value="{{guardianname}}"></paper-input>
        </div>
        <div class="fields" style="margin-left: 9%">
          <paper-input id="gmobile" error-message="enter proper mobile no!" label="Guardian Mobile Number" allowed-pattern="[0-9]" maxlength="10" value="{{guardianmob}}" on-change="verifymob"></paper-input>
        </div>
      </div>

      <div class="horizontalframe">
        <div class="fields">
          <gold-email-input id="email" label="Guardian Email" value="{{guardemail}}"></gold-email-input>
        </div>
        <div class="fields" style="margin-left: 9%">
          <paper-input id="gaddr" label="Guardian Address" value="{{gaddress}}"></paper-input>
        </div>
      </div> -->
     </div> 

      <div>
        <paper-button style="color:white;background-color:black;margin-left: 44%;margin-top: 11%;" on-click="fnsubmit">Submit</paper-button>
      </div>
    </paper-card>
      <student-add-service id="studservice"></student-add-service> 

      <demosumbit-card id="mydialog"></demosumbit-card>  
  </template>
  <script>
  (function() {
    'use strict';
    var gender;
    var transport;
    var dobdate;
    Polymer({
      is: 'student-add-card',


     FnStosGrade:function(e)
     {
       this.gradeid=e.target.selectedItem.value;
       this.gradename=e.target.selectedItem.textContent.trim();
     },
     Fnadminyr:function(e)
     {
      this.academicyear=e.target.selectedItem.textContent.trim(); 
     },

     fnmale:function()
     {
        if(document.querySelector("#male").checked==true)
        {
         document.querySelector("#female").checked=false;
         gender="Boy";
         //alert(gender);
        }
      },
      fnfemale:function()
      {
        if(document.querySelector("#female").checked==true)
        {
         document.querySelector("#male").checked=false;
         gender="Girl";
         //alert(gender);
        }
      },
      transyes:function()
      {
        if(document.querySelector('#tyes').checked==true)
        {
          transport="Yes";
          document.querySelector('#tno').checked=false;
        }
        if(document.querySelector('#tyes').checked==false)
          transport="";
      },
      transno:function()
      {
        if(document.querySelector('#tno').checked==true)
        {
          transport="No";
          document.querySelector('#tyes').checked=false;
        }
        if(document.querySelector('#tno').checked==false)
          transport="";
      },

      fnsubmit:function()
      {
        //alert(gender);
        

        if(transport==""||transport==null)
        {
          transport='Yes';
          //alert(transport);
          this.$.studservice.fnstudentadd(this.enroll,this.fname,this.midname,this.lsname,this.showdate,this.ageofyr,this.fathername,this.mothername,this.gradename,this.academicyear,gender,transport);
          this.$.studservice.fnparentadd(this.enroll,this.fathername,this.fatheremail,this.fathermob,this.address1,this.address2,this.address3,this.city,this.pincode,this.motheremail,this.mothername);
          transport="";

        }
        else
        {
          this.$.studservice.fnstudentadd(this.enroll,this.fname,this.midname,this.lsname,this.showdate,this.ageofyr,this.fathername,this.mothername,this.gradename,this.academicyear,gender,this.transport);
         this.$.studservice.fnparentadd(this.enroll,this.fathername,this.fatheremail,this.fathermob,this.address1,this.address2,this.address3,this.city,this.pincode,this.motheremail,this.mothername);
         transport="";
        }
        
      },
      getdate:function(dates)
      {
          var dt1=new Date(dates);
          dobdate=dates;
          var dt=new Date();
          var pr_year=dt.getFullYear();
          var bt_year=dt1.getFullYear();
          var diff=parseInt(pr_year-bt_year);
          //alert(diff);

          this.ageofyr=diff+" Years";
      },

      fnsuccessadd:function()
      {
        this.$.mydialog.toggleDialog();
      },
      FnfullRefresh:function()
      {
        document.querySelector('#adminyearstud').selected=-1;
        document.querySelector('#studgradesss').selected=-1;
        this.enroll="";
        this.fname="";
        this.midname="";
        this.lsname="";
        male.checked=false;
        female.checked=false;
        this.ageofyr="";
        this.fathername="";
        this.mothername="";
        this.fatheremail="";
        this.motheremail="";
        this.fathermob="";
        this.mothermob="";
        this.address1="";
        this.address2="";
        this.address3="";
        this.city="";
        this.pincode="";
        document.querySelector('student-dob-date-picker').FnCleardob();

      }
    });
  })();
  </script>
</dom-module>
